<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="UTF-8">
        <title>æ¸¸æˆè®¾ç½® - æ–‡å­—å›¾ç‰‡æ¶ˆæ¶ˆä¹</title>
        <style>
 
            body  {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            position: relative; /* æ–°å¢å®šä½ä¸Šä¸‹æ–‡ */
            display: flex;
          flex-direction: column;
          align-items: center; /* æ–°å¢æ•´ä½“å±…ä¸­ */
        }

        /* èƒŒæ™¯å®¹å™¨ */
        .background-layer {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }    

        .background-layer img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            filter: brightness(0.9); /* é™ä½äº®åº¦æå‡æ–‡å­—å¯è¯»æ€§ */
        }

        .input-group, .upload-section {
    margin: 20px auto; /* ä¸Šä¸‹20px å·¦å³è‡ªåŠ¨å±…ä¸­ */
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 90%;
    max-width: 600px;
}
    
            textarea {
                width: 96%;
                height: 30px;
                margin: 10px 0;
                padding: 12px;
                border: 2px solid #e0e0e0;
                border-radius: 8px;
                resize: vertical;
                font-size: 16px;
                background: rgba(255,255,255,0.9);
            }
    
            #imagePreview {
                display: flex;
                flex-wrap: wrap;
                gap: 10px;
                margin: 15px 0;
                min-height: 120px;
            }
    
            .preview-item {
                width: 80px;
                height: 80px;
                border: 2px dashed #4CAF50;
                border-radius: 8px;
                overflow: hidden;
                position: relative;
                cursor: move;
                transition: all 0.3s;
                background: rgba(255,255,255,0.9);
            }
    
            /* æŒ‰é’®æ©™è‰²æ ·å¼ */
        button {
            background: #FFA500 !important; /* ä¸»æ©™è‰² */
            border: 2px solid #FF8C00 !important;
            color: white !important;
            transition: all 0.3s !important;
        }

        button:hover {
            background: #FF8C00 !important; /* æ·±æ©™è‰² */
            transform: translateY(-2px) !important;
            box-shadow: 0 4px 12px rgba(255,140,0,0.3) !important;
        }

        button:active {
            background: #FF7F00 !important; /* æ›´æ·±çš„æ©™è‰² */
            transform: translateY(0) !important;
        }

            
        </style>
    </head>
<body>
    <header class="copyright-header">
        <p>è·ŸJennieå­¦ä¸­æ–‡ | Learn Chinese with Jennie </p>
    </header>
    <style>
    /* æ–°å¢é¡µçœ‰æ ·å¼ */
    .copyright-header {
    padding: 8px 20px; /* å‡å°å†…è¾¹è· */
    font-size: 15px;   /* ç¼©å°å­—ä½“ */
    color: white;
    border-bottom: 1px solid rgba(255,255,255,0); /* æ›´ç»†çš„è¾¹æ¡† */
}

/* æ–°å¢è¾“å…¥åŒºé€æ˜åº•çº¹å®¹å™¨ */
.content-wrapper {
    width: 90%;
    max-width: 800px;
    margin: 20px auto;
    padding: 25px;
    background: rgba(255,255,255,0.5);
    backdrop-filter: blur(5px);
    border-radius: 12px;
    box-shadow: 0 4px 20px rgba(0,0,0,0.1);
}

@media (max-width: 600px) {
    .content-wrapper {
        padding: 15px;
        margin: 15px auto;
    }
}
</style>
<div class="content-wrapper">
    <div class="input-group">
        <h3>ä¸­æ–‡è¾“å…¥ï¼ˆç”¨é¡¿å·ã€åˆ†éš”ï¼‰</h3>
        <textarea id="wordsInput" placeholder="ä¾‹ï¼šè‹¹æœã€é¦™è•‰ã€ç†ŠçŒ«"></textarea>
    </div>

    <div class="input-group">
        <h3>æ‹¼éŸ³è¾“å…¥ï¼ˆç”¨é¡¿å·ã€åˆ†éš”ï¼‰</h3>
        <textarea id="pinyinInput" placeholder="ä¾‹ï¼špÃ­ng guÇ’ã€xiÄng jiÄoã€xiÃ³ng mÄo"></textarea>
    </div>

    <div class="input-group">
        <h3>å›¾ç‰‡ä¸Šä¼ ï¼ˆæ”¯æŒæ‹–æ‹½æ’åºï¼‰</h3>
        <input type="file" id="imageUpload" multiple accept="image/*">
        <div id="imagePreview"></div>
    </div>

    <button id="startBtn">ğŸ® å¼€å§‹æ¸¸æˆ</button>
    <button id="resetBtn">ğŸ”„ é‡ç½®</button>
</div>

    <script>
        let images = [];
        let dragStartIndex = 0;

        // å›¾ç‰‡ä¸Šä¼ å¤„ç†
        document.getElementById('imageUpload').addEventListener('change', function(e) {
            const files = Array.from(e.target.files);
            const readers = files.map(file => {
                return new Promise(resolve => {
                    const reader = new FileReader();
                    reader.onload = e => resolve(e.target.result);
                    reader.readAsDataURL(file);
                });
            });

            Promise.all(readers).then(results => {
                images = [...images, ...results];
                refreshPreview();
            });
        });

        // æ‹–æ‹½åŠŸèƒ½å®ç°
        function initDragDrop() {
            const container = document.getElementById('imagePreview');
            
            container.addEventListener('dragstart', (e) => {
                const item = e.target.closest('.preview-item');
                if (!item) return;
                dragStartIndex = [...container.children].indexOf(item);
                item.classList.add('dragging');
            });

            container.addEventListener('dragover', (e) => {
                e.preventDefault();
                const afterElement = getDragAfterElement(container, e.clientY);
                const currentItem = document.querySelector('.dragging');
                if (!currentItem) return;

                if (afterElement) {
                    container.insertBefore(currentItem, afterElement);
                } else {
                    container.appendChild(currentItem);
                }
            });

            container.addEventListener('dragend', (e) => {
                const item = e.target.closest('.preview-item');
                if (item) {
                    item.classList.remove('dragging');
                    const dragEndIndex = [...container.children].indexOf(item);
                    swapItems(dragStartIndex, dragEndIndex);
                }
            });
        }

        function getDragAfterElement(container, y) {
            const draggableElements = [...container.querySelectorAll('.preview-item:not(.dragging)')];
            
            return draggableElements.reduce((closest, child) => {
                const box = child.getBoundingClientRect();
                const offset = y - box.top - box.height / 2;
                return offset < 0 && offset > closest.offset 
                    ? { offset: offset, element: child }
                    : closest;
            }, { offset: Number.NEGATIVE_INFINITY }).element;
        }

        function swapItems(fromIndex, toIndex) {
            [images[fromIndex], images[toIndex]] = [images[toIndex], images[fromIndex]];
            refreshPreview();
        }

        // åˆ·æ–°é¢„è§ˆ
        function refreshPreview() {
            const container = document.getElementById('imagePreview');
            container.innerHTML = '';
            
            images.forEach((src, index) => {
                const div = document.createElement('div');
                div.className = 'preview-item';
                div.draggable = true;
                div.innerHTML = `
                    <img src="${src}" style="width:100%;height:100%;object-fit:cover;">
                    <div class="remove-btn">Ã—</div>
                `;
                container.appendChild(div);
            });

            // åˆ é™¤åŠŸèƒ½
            container.querySelectorAll('.remove-btn').forEach((btn, index) => {
                btn.addEventListener('click', () => {
                    images.splice(index, 1);
                    refreshPreview();
                });
            });

            initDragDrop();
        }

        // å¼€å§‹æ¸¸æˆ
        document.getElementById('startBtn').addEventListener('click', () => {
            const words = document.getElementById('wordsInput').value.trim().split('ã€');
            const pinyins = document.getElementById('pinyinInput').value.trim().split('ã€');

            if (validateInput(words, pinyins)) {
                const gameData = {
                    words,
                    pinyins,
                    images
                };
                localStorage.setItem('gameData', JSON.stringify(gameData));
                window.location.href = 'game.html';
            }
        });

        // è¾“å…¥éªŒè¯
        function validateInput(words, pinyins) {
            if (words.length === 0 || pinyins.length === 0) {
                alert("è¯·è¾“å…¥å®Œæ•´å†…å®¹ï¼");
                return false;
            }
            if (words.length !== pinyins.length) {
                alert("ä¸­æ–‡ä¸æ‹¼éŸ³æ•°é‡ä¸åŒ¹é…ï¼");
                return false;
            }
            if (words.length !== images.length) {
                alert(`éœ€è¦ä¸Šä¼  ${words.length} å¼ å›¾ç‰‡ï¼ï¼ˆå½“å‰ï¼š${images.length}å¼ ï¼‰`);
                return false;
            }
            return true;
        }

        // é‡ç½®åŠŸèƒ½
        document.getElementById('resetBtn').addEventListener('click', () => {
            document.getElementById('wordsInput').value = '';
            document.getElementById('pinyinInput').value = '';
            document.getElementById('imagePreview').innerHTML = '';
            images = [];
        });


    </script>
    
</body>
<div class="background-layer">
    <img src="summer.jpg" alt="èƒŒæ™¯å›¾ç‰‡">
</div>
</html>